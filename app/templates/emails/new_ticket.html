{% extends "emails/base.html" %}

{% block title %}New Ticket Created - {{ ticket.id }}{% endblock %}

{% block header %}New Ticket Created{% endblock %}

{% block content %}
<h2>A new support ticket has been created</h2>

<div class="ticket-info priority-{{ ticket.priority.lower() }}">
    <h3>{{ ticket.title }}</h3>
    <p><strong>Ticket ID:</strong> {{ ticket.id }}</p>
    <p><strong>Priority:</strong> {{ ticket.priority }}</p>
    <p><strong>Category:</strong> {{ ticket.category }}</p>
    <p><strong>Status:</strong> {{ ticket.status }}</p>
    <p><strong>Created by:</strong> {{ ticket.creator.name if ticket.creator else ticket.created_by }}</p>
    <p><strong>Created at:</strong> {{ ticket.created_at.strftime('%Y-%m-%d %H:%M') }}</p>
</div>

<h4>Description:</h4>
<p>{{ ticket.description }}</p>

{% if ticket.assigned_to %}
<p><strong>Assigned to:</strong> {{ ticket.assigned_agent.name if ticket.assigned_agent else ticket.assigned_to }}</p>
{% else %}
<p><em>This ticket is currently unassigned</em></p>
{% endif %}

<a href="{{ url_for('tickets.get_ticket', ticket_id=ticket.id, _external=True) }}" class="button">
    View Ticket Details
</a>
{% endblock %}
